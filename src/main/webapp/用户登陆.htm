<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0037)http://192.168.1.60/manager_index.php -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=GBK">
		<title>用户登陆</title>
		<meta http-equiv="X-UA-Compatible" content="IE=7">
		
		<link rel="stylesheet" type="text/css" href="./用户登陆_files/style.css">
		<script type="text/javascript" src="./用户登陆_files/md5.js"></script><style type="text/css"></style>
		<script type="text/javascript" src="./用户登陆_files/jquery-1.7.2.min.js"></script>
		<script type="text/javascript">
			var xmlHttp = null;
			var usernameflag = false;
			var passwordflag = false;
			var passwordreg = /^[0-9a-zA-Z_]{5,16}$/;
			var usernamereg = /^[0-9a-zA-Z_]{1,16}$/;
			
		  function getcharlenth(str) 
	  	{
        var realLength = 0, len = str.length, charCode = -1;
        for (var i = 0; i < len; i++)
        {
          charCode = str.charCodeAt(i);
          if (charCode >= 0 && charCode <= 128) realLength += 1;
          else realLength += 2;
        }
      return realLength;
      };

      function onButton()
			{
					if(usernameflag&&passwordflag)
					{
						$("span").text("");
						$.ajax({
							type : 'get',
							url  : 'login.php',
							data : "username=" + $("#username").val() + "&password=" + MD5_hexhash($("#password").val()) + "&operationId=1&sid=" + Math.random(),
					dataType : 'xml',
					 success : function(msg)
					 					 {
					 	            if($(msg).find("result").children("ret").text()==0)
					 	            {
					 	            	window.location.href='management.php';	
					 	            }
					 	            else
					 	            {
					 	            	alert("用户名或密码错误");
					 	            }
					 					 },
					 	 error : function()
					 	 				 {
					 	 	       	  alert("系统错误");
					 	 	       }
					 	 });
					}
			}
			
			$(window).ready(function()
			{
				$(document).keyup(function(e)
        {
          if(e.keyCode==13)
          {
            onButton();
          }
        }); 
				$("#username").focus();
				
				$("#username").blur(function()
				{
					if($(this).val()=="" || $(this).val().length==0)
					{
						$("span:first").text("用户名不能为空");
					}	else if($(this).val().length > 16)
						{
								$("span:first").text("用户名长度不能大于16");
						} else if(!usernamereg.exec($(this).val()))
							{
								$("span:first").text("用户名包含非法字符");	
							}	else
									{
										usernameflag = true;
									}
				});
				$("#username").focus(function()
				{	
					$("span:first").text("");
				});
				$("#password").blur(function()
				{
					if($(this).val()=="" || $(this).val().length==0)
					{
						$("span:eq(1)").text("密码不能为空");
					}	else if($(this).val().length > 16)
						{
								$("span:eq(1)").text("密码长度须小于16位");
						} else if($(this).val().length < 5)
							{
								$("span:eq(1)").text("密码长度须大于5位");
							} else if(!passwordreg.exec($(this).val()))
								{
									$("span:eq(1)").text("密码包含非法字符");
								}	else
									{
										passwordflag = true;
									}
				});
				$("#password").focus(function()
				{	
					$("span:eq(1)").text("");
				});
			});
		</script>
	</head>
	<body>
		<div id="wrap">
			<div id="top_content">
					<div id="header">
						<div id="rightheader">
						</div>
						<div id="topheader">
							<h1 id="title">
							</h1>
						</div>
						<div id="navigation">
						</div>
					</div>
				<div id="content">
					<p id="whereami">
					</p>
					<h1>
						登陆
					</h1>
					<form>
						<table cellpadding="0" cellspacing="0" border="0" class="form_table">
							<tbody><tr>
								<td valign="middle" align="right">
									账号:
								</td>
								<td valign="middle" align="left">
									<input type="text" class="inputgri" name="username" id="username">
									<span style="color:red;font-style:italic;width:16px">用户名不能为空</span>
								</td>
							</tr>
							<tr>
								<td valign="middle" align="right">
									密码:
								</td>
								<td valign="middle" align="left">
									<input style="height:16px;width:147px" type="password" class="inputgri" id="password">
									<span style="color:red;font-style:italic;">
								</span></td>
							</tr>
							
							
						</tbody></table>
						<p>
							<input type="button" class="button" value="确认" onclick="onButton()">
						</p>
					</form>
				</div>
			</div>
			<div id="footer">
				<div id="footer_bg">
				</div>
			</div>
		</div>
	

<div id="shanbay_extension_result" class="shanbay_extension_result"><div id="shanbay_extension_result_shanbaydict" class="shanbay_extension_result_engine"><div id="shanbay_extension_result_shanbaydict_caption" class="shanbay_extension_result_caption"></div><div id="shanbay_extension_result_shanbaydict_content" class="shanbay_extension_result_content"></div></div><div id="shanbay_extension_result_googletran" class="shanbay_extension_result_engine"><div id="shanbay_extension_result_googletran_caption" class="shanbay_extension_result_caption"></div><div id="shanbay_extension_result_googletran_content" class="shanbay_extension_result_content"></div></div><div id="shanbay_extension_result_wikizh" class="shanbay_extension_result_engine"><div id="shanbay_extension_result_wikizh_caption" class="shanbay_extension_result_caption"></div><div id="shanbay_extension_result_wikizh_content" class="shanbay_extension_result_content"></div></div><div id="shanbay_extension_result_wikien" class="shanbay_extension_result_engine"><div id="shanbay_extension_result_wikien_caption" class="shanbay_extension_result_caption"></div><div id="shanbay_extension_result_wikien_content" class="shanbay_extension_result_content"></div></div></div></body></html>